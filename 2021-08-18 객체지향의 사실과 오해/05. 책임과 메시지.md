# 05. 책임과 메시지

> *의도는 "메시징"이다. <br> 훌륭하고 성장 가능한 시스템을 만들기 위한 핵심은 모듈 내부의 속성과 행동이 어떤가보다는 <br>
> 모듈이 어떻게 커뮤니케이션하는가에 달려 있다. - 앨런 케이*


## 달리와 밥 라타네의 실험
- 실험 결과로 다음과 같은 현상 정립 : 책임감 분산(diffusion of responsibility)

- 사건에 대한 목격자가 많으면 많을수록 개인이 느끼는 책임감이 적어짐
- 자신에게 명확한 책임이 없는 경우에는 발작을 일으킨 환자를 도와주는 일을 타인의 책임으로 간주함
- 반면에 책임이 명확하게 주어진 경우에는 신속하게 위기 상황을 해결하려고 노력함
- 명확한 책임과 역할을 지닌 참가자들이 협력에 참여해야 한다는 것   

<br>

## 자율적인 책임
- 객체지향 공동체를 구성하는 기본 단위는 **'자율적'인 객체**임

   - 자율적인 객체란, 스스로 정한 원칙에 따라 판단하고 스스로의 의지를 기반으로 행동하는 객체


- 적절한 책임이 자율적인 객체를 낳고, 자율적인 객체들이 모여 유연하고 단순한 협력을 낳음
   - 책임이라는 말 속에는 어떤 행동을 수행한다는 의미가 내포됨
- 책임은 협력에 참여하는 의도를 명확하게 설명할 수 있는 수준 안에서 추상적이어야 함
- 자율적인 책임의 특징은 객체가 '어떻게(how)' 해야 하는가가 아니라 **'무엇(what)'을 해야하는가를 설명하는 것**


<br>

## 메시지와 메서드

### 메시지
- 하나의 객체는 메시지를 전송함으로써 다른 객체에 접근함

- *메시지-전송*
   -  객체가 다른 객체에 접근할 수 있는 유일한 방법
   
- 메시지를 전송할 때 추가적인 정보가 필요한 경우 메시지의 인자(argument)를 통해 추가 정보 제공 가능
- 메시지는 메시지 이름(message name)과 인자의 두 부분으로 구성됨
  - ex. 증언하라(어제, 왕국) : 어제, 왕국에서 목격한 것을 증언할 것을 요청하고 싶을 때의 메시지
- 메시지 전송은 수신자와 메시지의 조합이고, 메시지는 메시지 이름과 인자의 조합
- **메시지 전송은 수신자, 메시지 이름, 인자의 조합**
   - ex. 모자장수.증언하라(어제, 왕국) : 모자 장수에게 어제, 왕국에서 목격한 것을 증언할 것을 요청
- 메시지를 수신받은 객체는 우선 자신이 해당 메시지를 처리할 수 있는지 확인
   - 메시지 처리 가능 = 객체가 해당 메시지에 해당하는 행동을 수행해야 할 책임이 있음
- 메시지는 '어떻게' 수행될 것인지는 명시하지 않음
- 오퍼레이션을 통해 '무엇'이 실행되기를 바라는지만 명시
- **객체지향 프로그래밍에서 행동은 수행할 책임을 지닌 객체에게 전송된 메시지에 의해 시작됨**

<br>

### 메서드
- 객체는 메시지를 수신하면 먼저 해당 메시지를 처리할 수 있는지 여부를 확인하고, <br> 처리할 수 있다고 판단되면 메시지를 처리할 방법인 메서드를 선택힘

<br>

### 다형성
- 다형성이란 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것을 의미함

- 메시지에는 처리 방법과 관련된 어떤 제약도 없음
   - 동일한 메시지라고 하더라도 서로 다른 방식의 메서드를 이용해 처리 가능
- 다형성은 역할, 책임, 협력과 깊은 관련이 있음
- 메시지 송신자의 관점에서 동일한 역할을 수행하는 다양한 타입의 객체와 협력할 수 있게 함
- 객체들의 대체 가능성을 이용해 설계를 유연하고 재사용 가능하게 만듦
    - 수신자의 종류를 캡슐화함
- 다형성은 송신자와 수신자 간의 객체 타입에 대한 결합도를 메시지에 대한 결합도로 낮춤으로써 달성됨
- 즉, 다형성은 협력을 유연하게 만들 수 있음

<br>

### 유연하고 확장 가능하고 재사용성이 높은 협력의 의미
- 협력이 유연해짐

- 협력이 수행되는 방식을 확장할 수 있음
- 협력이 수행되는 방식을 재사용할 수 있음
- 객체-지향 시스템은 협력하는 객체들의 연결망(web)
- 메시지를 기반으로 한 두 객체 사이의 낮은 결합도는 설계를 유연하고 확장 가능하며 재사용 가능하게 만듦

<hr>

## 메시지를 따라라

### 객체지향의 핵심, 메시지
- 객체들이 서로 협력하기 위해 사용할 수 있는 방법 : 메시지 전송하기

- 훌륭한 객체지향 프로그래밍의 목적=훌륭한 클래스를 창조하는 것
- 하지만 중요한 것은 클래스가 아니라 객체
    - 클래스는 단지 동적인 객체들의 특성과 행위를 정적인 텍스트로 표현하기 위해 사용하는 추상화 도구
    
    - 객체들의 속성과 행위를 식별하는 것이 먼저 
    - 클래스는 객체의 속성과 행위를 담는 틀일 뿐
- 객체지향 설계의 중심에는 메시지가 위치함


### 책임-주도 설계 다시 보기
- 객체지향 설계는 적절한 객체에게 할당하면서 메시지를 기반으로 협력하는 객체들의 관계를 발견하는 과정

- 메시지가 수신자의 책임을 결정


### What/Who 사이클
- 어떤 행위(what)가 필요한지를 먼저 결정한 후에 이 행위를 수행할 객체(who)를 결정하는 것


- 책임-주도 설계의 관점에서는 어떤 객체가 어떤 특성을 가지고 있다고 해서 반드시 그와 관련된 행위를 수행할 것이라고 가정하지 않음
- 객체는 다른 객체의 상태를 묻지 말아야 함
- 객체지향 시스템은 협력하는 객체들의 연결망임

<br>

## 객체 인터페이스
### 인터페이스
- 일반적으로 인터페이스란 어떤 두 사물이 마주치는 경계 지점에서 서로 상호작용할 수 있게 이어주는 방법이나 장치를 의미함

- 인터페이스의 세 가지 특징
    - 첫째. 인터페이스의 사용법을 익히기만 하면 내부 구조나 동작 방식을 몰라도 쉽게 대상을 조작하거나 의사 전달 가능
    
    - 둘째. 단순히 내부 구성이나 작동 방식만을 변경하는 것은 인터페이스 사용자에게 어떤 영향도 미치지 않음
    - 셋째. 대사이 변경되더라도 동일한 인터페이스를 제공하기만 하면 아무런 문제 없이 상호작용



### 공용 인터페이스
- 실제로 인터페이스는 외부에서 접근 가능한 공개된 인터페이스와 내부에서만 접근할 수 있는 감춰진 인터페이스로 구분됨

- 모든 인터페이스는 메시지 전송을 통해서만 접근 가능
- 너무 구체적인 인터페이스보다는 추상적인 인터페이스를 설계하는 것이 더 좋음
- 외부에서 사용할 필요가 없는 인터페이스는 최대한 노출하지 말 것



### 구현
- 객체는 상태와 행동을 가짐
   - 상태 : 어떻게 표현할지
   
   - 행동 : 메시지를 수신했을 때 어떻게 반응할 것인지
- 객체 외부에 영향을 미치는 변경은 객체의 공용 인터페이스를 수정할 때뿐


### 캡슐화
- 객체의 자율성을 보존하기 위해 구현을 외부로부터 감추는 것

- 정보 은닉(information hiding)
- 객체의 내부: 자신의 의지에 따라 변경하고 조작할 수 있음
- 객체의 외부 : 객체가 의지하고 접근할 수 있는 공용 인터페이스를 가짐
- 책임이 자율적일수록 적절하게 추상화됨
    - 응집도는 높아지고 캡슐화는 증진되며 설계의 유연성과 재사용성 향상됨
    
    - 결합도는 낮아지며 인터페이스와 구현이 명확히 분리됨
